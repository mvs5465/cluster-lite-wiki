{% extends "base.html" %}
{% block title %}{% if is_new %}New Page{% else %}Edit {{ page['title'] }}{% endif %} | {{ site_name }}{% endblock %}
{% block content %}
<section class="docs-layout">
  <aside class="sidebar-card">
    <p class="eyebrow">Writing</p>
    <h1>{% if is_new %}Create Page{% else %}Edit Page{% endif %}</h1>
    <p class="muted">Markdown is supported. Keep titles human-readable and slugs stable.</p>
    <div class="sidebar-note">
      <h2>Quick tips</h2>
      <p>Lead with purpose, use headings for sections, and keep operational commands in fenced code blocks.</p>
    </div>
  </aside>

  <section class="panel doc-panel">
    <div class="page-index-header">
      <div>
        <p class="eyebrow">Editor</p>
        <h2>{% if is_new %}Draft a new document{% else %}Revise {{ page['title'] }}{% endif %}</h2>
      </div>
    </div>
    <form class="editor" method="post" action="{{ url_for('save_page') }}">
      {% if not is_new %}
      <input type="hidden" name="original_slug" value="{{ page['slug'] }}">
      {% endif %}
      <div class="field-grid">
        <label>
          Title
          <input type="text" name="title" value="{{ page['title'] }}" required>
        </label>
        <label>
          Slug
          <input type="text" name="slug" value="{{ page['slug'] }}" placeholder="generated-from-title">
        </label>
      </div>
      <label>
        Body
        <textarea name="body" rows="18" required>{{ page['body'] }}</textarea>
      </label>
      <div class="actions">
        <button class="button primary" type="submit">Save</button>
        {% if not is_new %}
        <a class="button subtle" href="{{ url_for('view_page', slug=page['slug']) }}">Cancel</a>
        {% endif %}
      </div>
    </form>
  </section>
</section>
{% endblock %}
