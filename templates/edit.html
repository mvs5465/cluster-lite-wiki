{% extends "base.html" %}
{% block title %}{% if is_new %}New Page{% else %}Edit {{ page['title'] }}{% endif %} | {{ site_name }}{% endblock %}
{% block content %}
<section class="panel">
  <div class="panel-header">
    <div>
      <h1>{% if is_new %}Create Page{% else %}Edit Page{% endif %}</h1>
      <p class="muted">Markdown is supported. Slugs default from the title.</p>
    </div>
  </div>
  <form class="editor" method="post" action="{{ url_for('save_page') }}">
    {% if not is_new %}
    <input type="hidden" name="original_slug" value="{{ page['slug'] }}">
    {% endif %}
    <label>
      Title
      <input type="text" name="title" value="{{ page['title'] }}" required>
    </label>
    <label>
      Slug
      <input type="text" name="slug" value="{{ page['slug'] }}" placeholder="generated-from-title">
    </label>
    <label>
      Body
      <textarea name="body" rows="18" required>{{ page['body'] }}</textarea>
    </label>
    <div class="actions">
      <button class="button primary" type="submit">Save</button>
      {% if not is_new %}
      <a class="button" href="{{ url_for('view_page', slug=page['slug']) }}">Cancel</a>
      {% endif %}
    </div>
  </form>
</section>
{% endblock %}
